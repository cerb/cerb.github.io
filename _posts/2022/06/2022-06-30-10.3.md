---
layout: post
title:  "In Development: 10.3"
excerpt: Cerb 10.3 is a major feature update in development during May 2022 with 26 improvements from community feedback.
author: The Cerb Team
date: 2022-05-17 12:00:00 -0700
permalink: /releases/10.3/
social_image_url: /assets/images/releases/10.3/10.3.png
redirect_from:
  - /10.3/
tags: cerb announcements releases
release:
  type: feature upgrade
  count: 26
---

<div class="cerb-screenshot">
<img src="{{page.social_image_url}}" class="screenshot" width="500">
</div>

**Cerb (10.3)** is a **{{ page.release.type }}** in development as of {{page.date|date:'%B %d, %Y'}}.  It includes more than **{{ page.release.count }}** new features and improvements from community feedback.

* TOC
{:toc}

<div class="cerb-box note">
	<p>
		To check if you qualify for this release as a free update, view <b>Setup &raquo; Configure &raquo; License</b>. If your software updates expire on or after <b>September 30, 2021</b> then you can upgrade without renewing your license.  Cerb Cloud subscribers will be upgraded automatically.
	</p>
</div>

{% comment %}
# Introduction
...

Thanks for supporting Cerb!

- Jeff Standen, Software Architect, Cerb
{% endcomment %}

# Important Release Notes

* [**Always make a backup before upgrading!**](/docs/backups)

* **Cerb 10.3** requires **PHP 8.0+** and **MySQL 5.7+** (or **MariaDB 10.3+**).

* To upgrade your installation, [follow these instructions](/docs/upgrading).

* **NOTE:** The [branches](https://github.com/cerb/cerb-release/branches) in the `cerb/cerb-release` repository have changed. The `master` branch has been removed, and new branches exist for each major version (e.g. `v10.1`, `v10.3`).

* Visit the [community forums](https://github.com/cerb/cerb-release/discussions/) for tutorials and guides on new 10.0 features.

# Changelog

## Unreleased

## Added

* **[Records/Search/Links]** In record search queries, `links.(type).(field):` filters now exist for all custom fields that link to the current record type (record link, record links, worker). These are deep search filters that can filter the other side of the link. For instance, on a workers worklist, the query `links.ticket.testFieldset_worker:(status:o)` would return all workers linked to by the `testFieldset_worker` custom field, where the field's ticket is in the open status. [[#1215](https://github.com/jstanden/cerb/issues/1215)]

* **[Interactions/Worker]** In worker interactions, added a `query:` element to form continuations. This builds a search query with autocompletion for the given record type. This is particularly useful for user-level filtering above a sheet of records.

* **[Worklists/Export]** When exporting records from a worklist, a new 'Build' option uses KATA to provide full customization of the exported columns and values, including transformations using scripting filters. For instance, from a ticket worklist, a single exported 'Content' column can now combine mask, subject, and the first 2500 characters of the initial message content, while excluding quoted content. This makes it much easier to export content from Cerb directly into other services (e.g. Huggingface for building machine learning models). This is supported in all export formats: CSV, JSON, JSON Lines, and XML. Previously, only individual fields could be exported without any transformations, which often required a custom script to further format the data.

* **[Worklists/Export]** When exporting from a worklist, a new 'JSON Lines (.jsonl)' format is available. This exports one JSON object per line. The format is used by services like Huggingface.

* **[Queues/Schedule]** In queues, messages can now be pushed into a queue with delivery at a future date. This makes it much easier to implement scheduled automations. For instance, an escalation workflow can push a message into a queue with delivery in 2 hours. An automation timer could drain the queue at regular intervals. When processing those future messages, they could escalate an associated ticket if it didn't have any action in the meantime. The same process could also handle workflows like auto-closing tickets that wait longer than a certain deadline, etc.

* **[Automations/Log]** Automations now automatically log scripting syntax errors when they are encountered. Previously, scripting errors failed silently.

* **[Data Queries/Subtotals]** In `worklist.subtotals` data queries, date fields can now be grouped by `@hourofdayofweek` for categories like 'Wednesday 16:00'. This is useful for computing a baseline average week based on any date range. Thanks to [1Password](https://1password.com/) for the feature request.

## Changed

* **[Performance/Records]** Improved the performance of many ticket record searches. These queries now return only an ID (and optionally the sort field) and each page of results has its fields expanded when displayed. This allows more searches to be resolved entirely from an index. It also uses less memory which can lead to more efficient join strategies.

* **[Platform/Dependencies]** Updated the Horde IMAP library to version 2.30.4.

* **[Platform/Dependencies]** Updated the jQuery dependency from 1.11.2 to 3.4.0. [[#480](https://github.com/jstanden/cerb/issues/480)]

* **[Platform/Dependencies]** Upgraded the jQuery UI dependency from 1.11.2 to 1.13.1.

* **[Platform/Dependencies]** Updated the jQuery caret plugin to 1.3.7.

* **[Platform/Dependencies]** Updated the jQuery hoverIntent plugin from 1.8.1 to 1.10.2.

* **[Platform/Dependencies]** Updated the Ace Editor library from 1.4.7 to 1.4.14. [[#1437](https://github.com/jstanden/cerb/issues/1437)]

* **[Tour]** Updated the tour to match the latest UI and functionality.

## Deprecated

## Removed

* **[Search/Sphinx]** Removed Sphinx search engine support.

* **[Platform/Dependencies]** Removed the qTip library.

* **[Platform/Dependencies]** Removed the jQuery autosize plugin.

* **[Platform/Dependencies]** Removed the jQuery cookie plugin.

* **[Platform/Dependencies]** Removed the jQuery validate plugin.

## Fixed

* **[Data Queries/Subtotals]** In `worklist.subtotals` data queries, fixed an issue that prevented the same field from being used multiple times in the `by:` option. For instance, `by:[created@dayofweek,created@hourofday]`. [[#1372](https://github.com/jstanden/cerb/issues/1372)]

* **[Devblocks/Routing]** Fixed an issue in Devblocks request routing when friendly URLs are disabled. Depending on webserver configuration, it was possible to use any prefix in place of `/index.php/` as long as it had the same length.

* **[Scheduler/Storage]** In the `cron.storage` scheduler job, optimized the query used to determine when objects can be archived. Previously, this could log slow queries in large databases due to table scans.

## Security

* **[Security]** Cerb no longer responds to unsupported HTTP verbs: HEAD, OPTIONS, etc. Outside the API, we only respond to GET and POST.
  
* **[Security/Links]** When special characters are found in a URL route (e.g. `/profiles~~~/ticket/1`), a 'Not found' error is now displayed. Previously, these characters were silently removed and the request continued normally.

* **[Security/Sessions]** Improved cookie security by using an explicit path and setting the 'SameSite' directive.